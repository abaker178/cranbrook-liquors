<!-- Extend base layout template -->
{% extends 'layout.html' %}
{% block title %}Create New Special{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block nav_spec %}active{% endblock %}

<!-- ======= Content ======= -->
{% block content %}

<div class="container">
  <h1>Create New Special</h1>
  <div id="special-form" class="row">
    <!-- New Special Input -->
    <div class="col-12 col-md-8 container-fluid">

      <form novalidate>
        
        <!-- Category -->
        <div class="mb-3 beer wine spirits">
          <label for="category" class="form-label">Category</label>
          <select class="form-select" id="category" onchange="updateFields(this.value)">
            <option value="beer">Beer</option>
            <option value="wine">Wine</option>
            <option value="spirit">Spirit</option>
          </select>
        </div>
        
        <!-- Brand -->
        <div class="mb-3 beer wine spirits">
          <label for="brand" class="form-label">Brand (e.g. "Tito's" or "Dogfish Head")</label>
          <input type="text" class="form-control" id="brand" v-model="brand" required>
          <div class="invalid-feedback">Please provide the Brand</div>
        </div>

        <!-- Product -->
        <div class="mb-3 beer wine spirits">
          <label for="product" class="form-label">Product (e.g. "Vodka" or "60 Min.")</label>
          <input type="text" class="form-control" id="product" v-model="product" required>
          <div class="invalid-feedback">Please provide the Product</div>
        </div>

        <!-- Pack Size (Beer only) -->
        <div class="mb-3 toggle-visible beer">
          <label for="xpack" class="form-label">Pack Size (e.g. "6" or "12")</label>
          <input type="number" min=1 class="form-control toggle-required" id="xpack" v-model="xpack" required>
          <div class="invalid-feedback">Please provide the Pack Size</div>
        </div>

        <!-- Volume -->
        <div class="mb-3 beer wine spirits">
          <label for="volume" class="form-label">Volume (e.g. "1.75 L" or "750 ml")</label>
          <div class="row g-3">
            <div class="col-auto">
              <input type="number" min=1 step="0.01" class="form-control" id="vol-amount" v-model="volAmt" required>
              <div class="invalid-feedback">Please provide the Volume amount</div>
            </div>
            <div class="col-auto">
              <select class="col-auto form-select" id="vol-unit" v-model="volUnit">
                <option value="L">L</option>
                <option value="ml">ml</option>
                <option value="oz">oz</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Container (Beer only) -->
        <div class="mb-3 beer">
          <label for="container" class="form-label">Container</label>
          <div class="form-check form-switch">
            <input class="form-check-input container-type" type="checkbox" id="bottles" v-model="bottles" checked>
            <label class="form-check-label" for="bottles">Bottles</label>
          </div>
          <div class="form-check form-switch">
            <input class="form-check-input container-type" type="checkbox" id="cans" v-model="cans">
            <label class="form-check-label" for="cans">Cans</label>
          </div>
        </div>

        <!-- Varietals (Wine only) -->
        <div class="mb-3 toggle-visible wine">
          <label for="varietals" class="form-label">Varietals (e.g. "Cab and Chard." or "All Types")</label>
          <input type="text" class="form-control toggle-required" id="varietals" required>
          <div class="invalid-feedback">Please provide the list of Varietals</div>
        </div>

        <!-- Price -->
        <div class="mb-3 beer wine spirits">
          <label for="price" class="form-label">Price (e.g. "12.99")</label>
          <div class="input-group">
            <span class="input-group-text">$</span>
            <input type="number" step="0.01" class="form-control" v-model="price" required>
            <div class="invalid-feedback">Please provide the Price</div>
          </div>
        </div>

        <!-- Image -->
        <div class="mb-3 beer wine spirits">
          <label for="image-upload" class="form-label">Product Image (stock imagery will be used if not provided)</label>
          <input class="form-control" type="file" id="image-upload" oninput="readURL(this)">
        </div>
        
        <!-- Month -->
        <div class="mb-3 beer wine spirits">
          <label for="month">Month</label>
          <input class="form-control" type="month" id="month" required>
          <div class="invalid-feedback">Please select the Month for which this special is valid</div>
        </div>

        <!-- Submit -->
        <button type="submit" class="btn btn-primary">Submit</button>
      </form>
    </div>

    <!-- New Special Preview -->
    <div class="item col-12 col-md-4 mt-4 mx-auto">
      <h3>Site Preview</h3>
      <div class="item-wrap fancybox">
        <div id="preview" class="work-info">
          <h3 class="text-capitalize">[[ brand ]] [[ product ]]</h3>
          <div class="item-desc">[[ xpack ]]-pack [[ volAmt ]][[ volUnit ]] [[ bottles ? "bottles" : "" ]]<span v-if="bottles && cans"> & </span>[[ cans ? "cans" : "" ]]</div>
          <div class="item-price">$[[ price ]]</div>
        </div>
        <img id="item-image" class="img-fluid" src="/static/img/specials/beer/stock.jpg">
      </div>
    </div>
  </div>
</div>
{% endblock %}

<!-- Additional Scripts -->
{% block add_scripts %}
<script src="{{ url_for('static',filename='js/new-special.js') }}"></script>
<script>updateFields("beer")</script> <!-- load initial fields -->
{% endblock %}